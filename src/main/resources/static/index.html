<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/deng.css"/>
    <title>风享站</title>

    <style>
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .fileGroup {
            display: block;
            width: 100%;
            text-align: left;
            padding: 3px;
            font-size: 14px;
            border: 3px #ceecce dashed;
        }

        .fileItem {
            display: block;
            width: 97%;
            transition: .3s;
            text-align: center;
            border-radius: 3px;
            text-indent: 2rem;
        }

        .fileItem:hover {
            background-color: #ceecce;
            user-select: none;
        }

        #textarea {
            width: 100%;
            height: 300px;
            padding: 10px;
            background-color: #c1c1c2;
            transition: .3s;
            overflow: hidden;
            border: none;
        }

        #textarea:focus {
            background-color: #ffffff;
            outline: none;
        }

        .doublePassword, .doublePasswordV2 {
            height: 0;
            overflow: hidden;
        }

        input.valid {
            border: 1px solid darkseagreen;
        }

        input.error {
            border: 1px solid orangered;
        }

        label.error {
            color: #dc3545;
            font-size: 14px;
        }

        canvas {display: block;
            z-index: 0;pointer-events: none;position: fixed;top: 0;}

        footer p,footer div{
            display: inline-block;
        }
        footer,footer a{
            font-size: 12px;
            color: gray;
        }
        footer a:hover{
            text-decoration: none;
        }
    </style>
</head>

<body>
<!-- loginModal -->
<div class="modal fade" id="loginModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginLabel">登录</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="login" method="post">
                <div class="modal-body">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="loginEmail">邮箱</label>
                            <input type="text" class="form-control" name="email" id="loginEmail">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="loginPassword">密码</label>
                            <input type="password" class="form-control" name="password" id="loginPassword">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">登录</button>
                </div>
            </form>

        </div>
    </div>
</div>
<!-- regeditModal -->
<div class="modal fade" id="regeditModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">注册</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="regedit" method="post">
                <div class="modal-body">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="regEmail">邮箱</label>
                            <input type="text" class="form-control" name="email" id="regEmail">
                        </div>
                        <div class="doublePassword col-md-6">
                            <div class="form-group position-relative internalPassword" style="top: 0;">
                                <label for="regPassword">密码</label>
                                <input type="password" class="form-control" name="password"
                                       id="regPassword">
                                <br>
                                <label for="confirmRegPassword" class="pos">确认密码</label>
                                <input type="password" class="form-control" name="confirmPassword"
                                       id="confirmRegPassword"
                                       placeholder="确认密码" disabled>
                            </div>
                        </div>

                    </div>
                    <br>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">注册</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--changePasswordModal-->
<div class="modal fade" id="changePasswordModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">修改密码</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="changePassword" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="oldPassword">旧密码</label>
                        <input type="password" class="form-control" id="oldPassword"
                               placeholder="输入旧密码" name="oldPassword">
                    </div>
                    <div class="doublePasswordV2">
                        <div class="form-group position-relative internalPassword" style="top: 0;transition: .5s;">
                            <label for="newPassword">新密码</label>
                            <input type="password" class="form-control scrollPassword" id="newPassword"
                                   placeholder="输入新密码" name="newPassword">
                            <br>
                            <label for="confirmNewPassword" class="pos">确认新密码</label>
                            <input type="password" class="form-control" id="confirmNewPassword"
                                   placeholder="确认新密码" name="confirmPassword" disabled>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">修改</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- sendModal -->
<div class="modal fade" id="sendModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="upload" method="post" enctype="multipart/form-data">
                <label>
                    <input type="text" value="file" name="filetype" style="display: none"/>
                </label>
                <div class="modal-header">
                    <h5 class="modal-title" id="sendLabel">发送</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="card text-center w-100 h-100 " id="sendDialog">
                        <div class="card-body">
                            <div class="input-group mb-3">
                                <input type="file" class="custom-file-input d-none" id="submitFile"
                                       name="file" required>
                                <div class="fileGroup">文件列表: <br></div>
                            </div>

                            <div class="form-group">
                                <label for="allowTimes-input">允许下载次数</label>
                                <input type="number" id="allowTimes-input" class="form-control"
                                       name="times" value="1" min="1" max="9">
                            </div>

                            <div class="form-group">
                                <label for="secondryPassword">二级密码（可选）</label>
                                <input type="password" id="secondryPassword" class="form-control"
                                       name="password"
                                       placeholder="(默认为空也就是没有密码)">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer"><small class="d-none">云端正在进行安全备份，请耐心等待！</small>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <button type="submit" class="btn btn-primary" id="sendBtn">发送</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--QRCodeModal-->
<div class="modal fade" tabindex="-1" role="dialog" id="QRCodeModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">二维码</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body image d-flex justify-content-center">
                <div id="QRCode"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">返回</button>
            </div>
        </div>
    </div>
</div>
<!--sendTextModal-->
<div class="modal fade" tabindex="-1" role="dialog" id="sendTextModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">发送文本</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <label for="textarea"></label><textarea name="content" id="textarea" placeholder="输入文字"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
            </div>
        </div>
    </div>
</div>
<!-- receiveModal -->
<div class="modal fade" id="receiveModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="" method="post">
                <label>
                    <input type="text" name="check" value="true" readonly style="display: none"/>
                </label>
                <div class="modal-header">
                    <h5 class="modal-title" id="receiveLabel">接收</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <label for="code">取件码</label>
                    <input type="text" class="form-control" name="fid" id="code" minlength="4" maxlength="4">
                    <div class="pw overflow-hidden" style="height: 0">
                        <label for="code_password">密码</label>
                        <input type="password" class="form-control" name="password" id="code_password">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <!--                    这里使用了button，导致无法使用h5内置的表单校验了-->
                    <button type="submit" class="btn btn-primary" id="receive-confirm">接收</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--receiveCodeModal-->
<div class="modal fade" tabindex="-1" role="dialog" id="codeModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">发送成功，您的取件码为</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="codeNumber" class="text-center font-weight-bold "
                   style="letter-spacing: 10px;font-size: 24px;"></p>
                <p class="qrAndDl text-center font-weight-lighter d-none">您也可以 <a href="javascript:0;" id="directLink">复制下载链接</a>或
                    <a href="javascript:0;" id="getQRCode">扫描二维码</a></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" data-clipboard-target="#codeNumber" id="copyCode">复制
                </button>
            </div>
        </div>
    </div>
</div>
<!--receiveImageModal-->
<div class="modal fade" tabindex="-1" role="dialog" id="imageModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">图片</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body image d-flex justify-content-center">
                <img src="" alt="取过来的文件" width="400px">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
<!--receiveTextModal-->
<div class="modal fade" tabindex="-1" role="dialog" id="receiveTextModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">文本内容为</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <pre id="textContent"></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" data-clipboard-target="#textContent" id="copyText">复制
                </button>
            </div>
        </div>
    </div>
</div>
<!--toast-container-br-->
<div class="position-fixed p-3 toast-container-br" style="bottom: 30px;right: 0"></div>












<header>
    <nav class="navbar navbar-expand-lg navbar-light bg-danger">
        <a class="navbar-brand" href="javascript:0;" id="title">风享站</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse flex-row-reverse" id="navbarNav">
            <ul class="navbar-nav" id="log-reg-btn">
                <li class="nav-item active">
                    <button type="button" class="btn btn-success mr-3" data-toggle="modal" data-target="#loginModal">
                        登录
                    </button>
                </li>
                <li class="nav-item">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#regeditModal">
                        注册
                    </button>
                </li>
            </ul>

            <div class="btn-group d-none" id="logged">
                <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown"></button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="javascript:0;" id="changePassword" data-toggle="modal"
                       data-target="#changePasswordModal">修改密码</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="javascript:0;" id="exitLogin">退出登录</a>
                </div>
            </div>
        </div>
    </nav>
</header>
<main class="container" style="height: 100%;">
    <div class="deng-box1">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b"><div class="deng-t">2</div></div>
            </div>
            <div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div>
        </div>
    </div>
    <div class="deng-box2">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b"><div class="deng-t">0</div></div>
            </div>
            <div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div>
        </div>
    </div>
    <div class="deng-box3">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b"><div class="deng-t">2</div></div>
            </div>
            <div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div>
        </div>
    </div>
    <div class="deng-box4">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b"><div class="deng-t">1</div></div>
            </div>
            <div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div>
        </div>
    </div>

    <!--    TODO 建立开发板，放上一些tip和未来要加入的功能-->
    <!--    TODO 网页可以设置文件不用存入hdfs，缩短上传时间-->


    <div class="position-absolute d-none m-2" id="info" style="left: 0">
        <div class="card bg-light mb-3" id="siteInfo" style="max-width: 18rem;">
            <div class="card-header bg-danger">本站说明
                <button type="button" class="close">
                    <span>&times;</span>
                </button>
            </div>
            <div class="card-body pre-scrollable" style="height: 15rem">
                <p class="card-text">欢迎来到风享站，本站可用于临时匿名分享文件</p>
                <p class="card-text"><strong>注册说明:</strong> <br>目前仅支持邮箱注册，且需要验证邮箱</p>
                <p class="card-text"><strong>上传说明:</strong> <br>
                    游客上传文件仅允许10次以内、容量上限为100MB的文件，且最长有效期为7天；注册用户上传文件可享受100次以内、容量上限1G的特权，最长有效期为30天(图片的容量上限游客和注册用户统一为7MB)
                </p>
            </div>
        </div>
    </div>

    <div class="row h-100 justify-content-center align-content-center">
        <div class="col-8 text-center">
            <div class="btn-group d-block" role="group">
                <button type="button" class="btn btn-outline-primary  px-5 mb-4 d-none" id="text">文本</button>
                <button type="button" class="btn btn-outline-primary  px-5 mb-4" id="send">发送</button>
                <button type="button" class="btn btn-outline-primary  px-5 mb-4 d-none" id="image">图片</button>
            </div>
            <div class="btn-group d-block" role="group">
                <button type="button" class="btn btn-outline-primary px-5" data-toggle="modal"
                        data-target="#receiveModal" id="receive">接收
                </button>
            </div>
        </div>
    </div>
</main>
<footer class="position-absolute px-4 d-flex justify-content-between" style="bottom: 0; left: 0;width: 100%;">
    <div>
        <p class="mr-3"><a href="https://beian.miit.gov.cn">浙ICP备19047112号-2</a></p>
        <p><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33102202000473"><img src="img/beian.png" alt="公安备案"/>浙公网安备 33102202000473号</a></p>
    </div>
    <div class="ml-auto">
        <p>©2020 Yionr</p>
    </div>

</footer>
</body>
<script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1279736126'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1279736126' type='text/javascript'%3E%3C/script%3E"));</script>
<script src="js/jquery-3.5.1.js"></script>
<script src="js/jquery.form.js"></script>
<script src="js/jquery.validate.js"></script>
<script src="js/messages_zh.js"></script>
<script src="js/clipboard.min.js"></script>
<script src="js/qrcode.js"></script>
<script src="bootstrap/js/bootstrap.bundle.js"></script>
<script src="js/core.js"></script>
<script src="js/md5.js"></script>
<script src="js/variable.js"></script>
<script src="js/init.js"></script>
<script src="js/validate.js"></script>
<script src="js/tools.js"></script>
<script src="js/modalEvent.js"></script>
<script src="js/submit.js"></script>
</html>